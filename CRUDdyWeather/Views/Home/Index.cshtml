@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Search a location to get the current weather and store in our CRUD database.</p>
</div>

<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#inputModal">
    New Search
</button>
<!-- Search Modal -->
<!-- TODO: Make Alt Tab/View For Address Search -->
<div class="modal fade" id="inputModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="modalLabel">Enter Location Data</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form id="modalForm">
                    
                    <!-- Get GeoCords from User -->
                    <div class="mb-3">
                        <label for="Latitude" class="form-label">Building Number</label>
                        <input type="number" class="form-control" id="Latitude" name="Latitude" step=".000001" min="-90" max="90" required>
                    </div>
                    <div class="mb-3">
                        <label for="Longitude" class="form-label">Street Name</label>
                        <input type="number" class="form-control" id="Longitude" name="Longitude" step=".000001" min="-180" max="180" required>
                    </div>

                    <!-- GetForcast Option from User-->
                    <div class="mb-3">
                        <p>Please select a forcast type:</p>
                        <input type="radio" id="hourly" name="SearchType" value="hourly" required/> 
                        <label for="SearchType" class="form-label">Hourly</label>
                        <input type="radio" id="daily" name="SearchType" value="daily"/>
                        <label for="SearchType" class="form-label">Daily</label>
                        
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="container" style="display:flex; padding:15px; border-spacing:15px;">
   <table id="records">
       <tr id="topRow">
           <th>Location</th>
           <th>Time</th>
           <th>Weather</th>
           <th>Temperature (F)</th>
           <th>Interact</th>
       </tr>
   </table>

   <div id="mapBox" style="height:300px;width:300px;background-color:gold">

   </div>

</div>

<script>
    $(document).ready(function() {
        $("#modalForm").submit(function(event) {
            event.preventDefault(); // Prevent normal form submission

            $.ajax({
                url: '@Url.Action("SubmitForm", "YourController")',
                type: "POST",
                data: $(this).serialize(),
                success: function(response) {
                    alert("Form submitted successfully!");
                    $('#inputModal').modal('hide'); // Close modal
                },
                error: function() {
                    alert("Error submitting form.");
                }
            });
        });
    });
</script>


